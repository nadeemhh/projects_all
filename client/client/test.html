<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	
	<div id="myHeading">
		<div>
		<h1>Hello, World!</h1>
	</div>
	</div>
	</div>
	<script>

let checkorder=['09:20', '09:25', '09:30', '09:35', '09:40', '09:45', '09:50', '09:55', '10:00', '10:05', '10:10', '10:15', '10:20', '10:25', '10:30', '10:35', '10:40', '10:45', '10:50', '10:55', '11:00', '11:05', '11:10', '11:15', '11:20', '11:25', '11:30', '11:35', '11:40', '11:45', '11:50', '11:55', '12:00', '12:05', '12:10', '12:15', '12:20', '12:25', '12:30', '12:35', '12:40', '12:45', '12:50', '12:55', '13:00', '13:05', '13:10', '13:15', '13:20', '13:25', '13:30', '13:35', '13:40', '13:45', '13:50', '13:55', '14:00', '14:05', '14:10', '14:15', '14:20', '14:25', '14:30', '14:35', '14:40', '14:45', '14:50', '14:55', '15:00', '15:05', '15:10', '15:15', '15:20', '15:25'];

let stockPrice=[];
window.addEventListener('keypress',function (event) {
	let key = event.key;
   
   if (key == "r") {
	
let prevtime;
let heading = document.querySelector('cq-hu-date');
      let lastText = heading.textContent;


      function handleHeadingChange() {
        let newText = heading.textContent;

		if(newText!=''){
		if(lastText!=newText){
			if(document.querySelector('cq-hu-date').textContent!='N/A'){
				let currenttime=document.querySelector('cq-hu-date').textContent.split(' ')[1].split(':')[1];
			//console.log(`close - `,document.querySelector('cq-hu-close').textContent)
			//console.log(`date - `,document.querySelector('cq-hu-date').textContent.split(' ')[1].split(':'))
			console.log(`prevtime - `,prevtime,`currenttime - `,currenttime)

if(currenttime=='00'?true:parseFloat(currenttime)-parseFloat(prevtime)==5 ||parseFloat(currenttime)-parseFloat(prevtime)==-5){
	console.log(`close - `,document.querySelector('cq-hu-close').textContent)
console.log(`date - `,document.querySelector('cq-hu-date').textContent)

let newObj = {cuuurenPrice:document.querySelector('cq-hu-close').textContent,date:document.querySelector('cq-hu-date').textContent,alignCheck:document.querySelector('cq-hu-date').textContent.split(' ')[1]};

let existingObj = stockPrice.find(obj => obj.date === newObj.date);

if(!existingObj){

	if(newObj.alignCheck!='09:20'){
		if(stockPrice.length >1?checkorder[checkorder.indexOf(newObj.alignCheck)-1]==stockPrice[stockPrice.length-1].alignCheck:true){

		stockPrice.push(newObj)

		}
	}
	else{stockPrice.push(newObj)}


}

}
else{
	console.log('############ gap ############')
	alert('gap')}
prevtime=document.querySelector('cq-hu-date').textContent.split(' ')[1].split(':')[1];

		}
        lastText = newText;

	  }}
      }

      heading.addEventListener('DOMSubtreeModified', handleHeadingChange);
   }
})

// setInterval(() => {
// 	console.log('l')
// 	heading.textContent=`Hello, World!`;
// }, 2000);



	</script>
</body>
</html>